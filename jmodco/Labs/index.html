<!DOCTYPE html>
<html lang="en" id="top">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jmod Labs — The Innovation Core of Jmod Co.</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      /* === GLOBAL SIZE KNOBS ===
         Adjust the hero logo once, everywhere else stays intact.        */
      --hero-logo-scale: 0.90;     /* 0.60–1.10 typical */

      /* Theme */
      --bg:#0a0b0f; --bg2:#0e1017;
      --card:#11131c; --ink:#e6ecff; --muted:#9aa4c3;
      --cyan:#57e6ff; --mag:#ff3df2; --silver:#c9d0dd;
      --glass:rgba(255,255,255,.06); --border:rgba(201,208,221,.14);
      --shadow:0 10px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.03);
      --radius:18px; --radius-sm:12px; --gap:18px; --maxw:1200px;

      /* Background tuning */
      --pulse-speed: 4200ms;
      --ring-speed: 55s;
      --density: 0.75;
      --blur: 0.6px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font:16px/1.5 Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(255,61,242,.06), transparent 60%),
        radial-gradient(1200px 800px at 120% 10%, rgba(87,230,255,.07), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden; position:relative; isolation:isolate;
    }

    /* ===== Animated Neural/Circuit Background (fixed for parallax) ===== */
    #labs-bg{position:fixed; inset:0; z-index:-1; overflow:hidden;
      background: radial-gradient(1200px 800px at 50% -10%, rgba(120,170,255,.06), transparent 60%),
                  linear-gradient(180deg, #071026, #0a142f 35%, #0b1638 65%, #0a142f);}
    #labs-grid{position:absolute; inset:0;
      background:
        repeating-linear-gradient(0deg,   rgba(120,160,220,.10) 0 1px, transparent 1px 48px),
        repeating-linear-gradient(90deg,  rgba(120,160,220,.10) 0 1px, transparent 1px 48px);
      mask-image: radial-gradient(ellipse at 50% 40%, rgba(255,255,255,.9), rgba(255,255,255,.3) 50%, transparent 80%);
    }
    #labs-svg{width:100%; height:100%; display:block; filter: drop-shadow(0 0 10px rgba(86,224,255,.25));}
    .orbit{fill:none; stroke:rgba(120,200,255,.25); stroke-width:.8}
    .orbit.slow{animation:spin var(--ring-speed) linear infinite; transform-origin:50% 50%}
    .orbit.fast{animation:spin calc(var(--ring-speed)/2) linear infinite reverse; transform-origin:50% 50%}
    @keyframes spin{to{transform:rotate(360deg)}}
    .link{stroke:rgba(135,220,255,.40); stroke-width:1; stroke-linecap:round; filter:blur(var(--blur));
      stroke-dasharray:3 120; animation:pulse var(--pulse-speed) cubic-bezier(.25,.6,.2,1) infinite}
    @keyframes pulse{0%{stroke:#eaf9ff;stroke-width:1.5;stroke-dashoffset:0;opacity:.95}
      60%{stroke:#57e6ff;stroke-width:1;stroke-dashoffset:-130;opacity:.55}
      100%{stroke:#7dd9ff;stroke-width:.9;stroke-dashoffset:-260;opacity:.35}}
    .node{fill:#89d8ff}
    .halo{fill:none; stroke:rgba(130,210,255,.35); stroke-width:6; filter:blur(2px)}
    .icon{fill:none; stroke:#cfe9ff; stroke-width:1.2; opacity:.9; filter:drop-shadow(0 0 6px rgba(200,240,255,.35))}
    .brand-weave{fill:url(#brandGrad); font:700 18px/1.1 "Inter", ui-sans-serif, system-ui; letter-spacing:.4px;
      filter:drop-shadow(0 0 8px rgba(120,200,255,.35))}

    /* Header (no logo in nav) */
    header{position:sticky; top:0; z-index:5; backdrop-filter:blur(10px);
      background:linear-gradient(180deg, rgba(10,11,15,.75), rgba(10,11,15,.35) 70%, transparent);
      border-bottom:1px solid var(--border)}
    .bar{display:flex; align-items:center; justify-content:space-between; gap:20px}
    .brand{display:flex; align-items:center; gap:12px}
    .brand .t1{font-weight:700; letter-spacing:.3px}
    nav{display:flex; gap:18px}
    a{color:var(--cyan); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:28px 20px; position:relative; z-index:2}

    /* HERO */
    .hero{display:grid; grid-template-columns: 1fr 1.2fr; gap:32px; align-items:center;
      padding:56px 20px 24px; margin:0 auto; max-width:var(--maxw); position:relative; z-index:2}
    .hero-card{background:linear-gradient(180deg, var(--glass), transparent 70%);
      border:1px solid var(--border); border-radius:var(--radius); padding:28px; box-shadow:var(--shadow); position:relative; overflow:hidden}
    .hero-left{display:flex; align-items:center; justify-content:center; padding:24px}
    /* UNIVERSAL IMAGE SLOT — set --img-scale to control any image’s width */
    .img-slot{width:100%; display:flex; justify-content:center}
    .img-slot > img{width:calc(var(--img-scale,1) * 100%); max-width:none; height:auto; object-fit:contain; transition:width .25s ease}
    /* Hero logo uses global knob */
    #heroLogo{--img-scale: var(--hero-logo-scale); filter: drop-shadow(0 0 26px rgba(87,230,255,.45))}
    .hero-right h1{font-size:clamp(28px, 4vw, 46px); margin:0 0 10px}
    .tag{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px;
      background:linear-gradient(90deg, rgba(255,61,242,.12), rgba(87,230,255,.12));
      border:1px solid var(--border); font-size:.85rem; color:var(--muted); margin-bottom:12px}
    .hero-right p{color:var(--muted); margin:10px 0 18px}
    .cta-row{display:flex; gap:12px; flex-wrap:wrap; justify-content:center}
    .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:12px; border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); color:var(--ink); box-shadow:var(--shadow);
      cursor:pointer; transition:transform .2s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-1px); box-shadow:0 18px 40px rgba(87,230,255,.12)}
    .btn.primary{background:
      radial-gradient(300px 120px at 20% 20%, rgba(255,61,242,.25), transparent 60%),
      radial-gradient(300px 120px at 80% 20%, rgba(87,230,255,.25), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.04));
      border-color:rgba(201,208,221,.35)}

    /* Sections */
    section{padding:36px 20px}
    .section-title{max-width:var(--maxw); margin:0 auto 16px; display:flex; align-items:baseline; justify-content:space-between; gap:16px}
    .section-title h2{margin:0; font-size:clamp(22px,3vw,30px)}
    .muted{color:var(--muted)}
    .grid{max-width:var(--maxw); margin:0 auto; display:grid; gap:var(--gap); grid-template-columns: repeat(12, 1fr)}
    .card{grid-column: span 12; background:linear-gradient(180deg, var(--glass), transparent 60%);
      border:1px solid var(--border); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow); position:relative; overflow:hidden}
    @media (min-width:720px){.card.sm-6{grid-column:span 6} .card.sm-4{grid-column:span 4} .card.sm-3{grid-column:span 3}}
    .card h3{margin:0 0 4px; font-size:1.1rem}
    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px}
    .chip{font-size:.75rem; background:#1a1f2d; border:1px solid var(--border); padding:4px 8px; border-radius:999px; color:var(--muted)}
    .status.beta{background:linear-gradient(90deg, rgba(87,230,255,.18), rgba(87,230,255,.08))}
    .status.soon{background:linear-gradient(90deg, rgba(201,208,221,.22), rgba(201,208,221,.08)); color:#dfe6f3}
    .redact{position:relative; color:transparent; text-shadow:none}
    .redact::after{content:"████████████"; letter-spacing:.08em; color:#e6e6e6; background:#000; padding:0 .25rem; border-radius:4px}
    .card p{color:var(--muted); margin:8px 0 12px}
    .card .actions{display:flex; gap:10px; flex-wrap:wrap}

    /* Process / Tech */
    .process{display:grid; grid-template-columns:repeat(3,1fr); gap:var(--gap); max-width:var(--maxw); margin:0 auto}
    .step{background:linear-gradient(180deg, var(--glass), transparent 60%); border:1px solid var(--border); border-radius:var(--radius-sm); padding:16px; box-shadow:var(--shadow)}
    .tech{max-width:var(--maxw); margin:0 auto; display:flex; gap:14px; flex-wrap:wrap}
    .pill{border:1px solid var(--border); background:var(--glass); border-radius:999px; padding:8px 12px; color:var(--muted); font-size:.9rem}
    .pill.silver{border-color:rgba(201,208,221,.35); color:#e3e8f3}

    /* Modal + Footer */
    dialog{border:none; border-radius:16px; padding:0; width:min(560px, 92vw);
      background:linear-gradient(180deg, #131628, #0f1222); color:var(--ink); box-shadow:0 30px 80px rgba(0,0,0,.55)}
    dialog::backdrop{background:radial-gradient(800px 600px at 50% 50%, rgba(87,230,255,.2), rgba(0,0,0,.6))}
    .modal{padding:22px; border-bottom:1px solid var(--border)}
    .modal-body{padding:18px 22px; display:grid; gap:12px}
    .field{display:grid; gap:6px}
    .field input{background:#0c0f1d; border:1px solid var(--border); color:var(--ink); padding:12px 12px; border-radius:10px}
    .modal-actions{display:flex; justify-content:flex-end; gap:10px; padding:0 22px 22px}
    footer{border-top:1px solid var(--border); margin-top:40px; background:linear-gradient(180deg, rgba(255,61,242,.05), transparent)}
    .foot-inner{max-width:var(--maxw); margin:0 auto; padding:18px 20px; color:var(--muted); display:flex; gap:12px; flex-wrap:wrap; align-items:center}
  </style>
</head>
<body>

  <!-- ===== Parallax Background ===== -->
  <div id="labs-bg" aria-hidden="true">
    <div id="labs-grid"></div>
    <svg id="labs-svg" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid slice">
      <defs>
        <linearGradient id="brandGrad" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="#cfe9ff"/><stop offset="100%" stop-color="#7fd9ff"/>
        </linearGradient>
        <symbol id="ai-cloud" viewBox="0 0 24 24"><path d="M7 17h10a4 4 0 0 0 0-8 5 5 0 0 0-9.8 1A3.5 3.5 0 0 0 7 17Z"/></symbol>
        <symbol id="ai-shield" viewBox="0 0 24 24"><path d="M12 3l7 3v5c0 5-3.5 8.5-7 10-3.5-1.5-7-5-7-10V6l7-3Z"/><path d="M9 12l2 2 4-4"/></symbol>
        <symbol id="ai-graph" viewBox="0 0 24 24"><path d="M4 19V5"/><path d="M4 19H20"/><rect x="7" y="11" width="3" height="6" rx="1"/><rect x="12" y="8" width="3" height="9" rx="1"/><rect x="17" y="6" width="3" height="11" rx="1"/></symbol>
        <symbol id="ai-gear" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19 12a7 7 0 0 0-.1-1l2-1.2-1.2-2-2 1a7 7 0 0 0-1.6-.9l-.2-2.2H9.1l-.2 2.2a7 7 0 0 0-1.6.9l-2-1L4.1 9.8 6 11a7 7 0 0 0 0 2l-2 1.2 1.2 2 2-1a7 7 0 0 0 1.6.9l.2 2.2h3.8l.2-2.2a7 7 0 0 0 1.6-.9l2 1 1.2-2L18.9 13c.07-.33.1-.66.1-1Z"/></symbol>
      </defs>
      <g opacity=".35">
        <circle class="orbit slow" cx="600" cy="400" r="280"/>
        <circle class="orbit fast" cx="600" cy="400" r="380"/>
      </g>
      <g id="links"></g>
      <g id="nodes"></g>
      <text id="brand-text" class="brand-weave" x="645" y="430">Jmod Labs</text>
      <g opacity=".9">
        <g transform="translate(250 170) scale(1.3)"><use href="#ai-cloud" class="icon"/></g>
        <g transform="translate(950 240) scale(1.1)"><use href="#ai-graph" class="icon"/></g>
        <g transform="translate(820 560) scale(1.1)"><use href="#ai-shield" class="icon"/></g>
        <g transform="translate(310 520) scale(1.1)"><use href="#ai-gear" class="icon"/></g>
      </g>
    </svg>
  </div>
  <!-- =============================================================== -->

  <header>
    <div class="wrap bar">
      <div class="brand"><div class="t1">Jmod Labs</div></div>
      <nav>
        <a href="#experiments">Experiments</a>
        <a href="#mandate">Mandate</a>
        <a href="#tech">Tech</a>
        <a href="#join">Join</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" aria-label="Hero">
    <div class="hero-card hero-left">
      <!-- Labeled image placer: change --hero-logo-scale at :root OR inline here -->
      <div class="img-slot" id="heroLogo">
        <img src="/jmodco/assets/Jmod_LabsTP.png" alt="Jmod Labs logo" />
      </div>
    </div>
    <div class="hero-card hero-right">
      <div class="tag">The Innovation Core of <strong>Jmod Co.</strong></div>
      <h1>Engineering tomorrow’s systems — today.</h1>
      <p>Explore public highlights. Deeper demos and docs require sign-in. All divisions leverage the Labs knowledge base — continuously learning and improving.</p>
      <div class="cta-row">
        <button class="btn primary" onclick="document.getElementById('signin').showModal()">Sign in for access</button>
        <a class="btn" href="#experiments">View active experiments</a>
      </div>
    </div>
  </section>

  <!-- MANDATE (Core Identity / Primary Role / Focus Areas) -->
  <section id="mandate">
    <div class="section-title wrap">
      <h2>R&amp;D Mandate</h2>
      <div class="muted">How Labs turns ideas into systems</div>
    </div>
    <div class="grid">
      <article class="card sm-6">
        <div class="chips"><span class="chip">Core Identity</span></div>
        <h3>The R&amp;D &amp; AI experimentation division</h3>
        <p>Where new technologies, automation ideas, and tools are created and tested.</p>
      </article>
      <article class="card sm-6">
        <div class="chips"><span class="chip">Primary Role</span></div>
        <h3>Design, test, and prototype</h3>
        <p>AI tools, data pipelines, and automation frameworks. Develop internal engines (e.g., the <strong>MODDES™ Core Engine</strong>) for data translation, optimization, and cross-system learning. Conduct experiments and trials that later scale into deployable business products. Bridge concepts from <strong>Systems</strong> and <strong>Insights</strong> into actionable technologies.</p>
      </article>
      <article class="card sm-12">
        <div class="chips"><span class="chip">Focus Areas</span></div>
        <ul>
          <li>Machine learning prototypes</li>
          <li>Process automation &amp; predictive analytics</li>
          <li>API integrations &amp; workflow optimization</li>
          <li>Software proof-of-concepts (internal alpha builds)</li>
        </ul>
      </article>
    </div>
  </section>

  <!-- EXPERIMENTS -->
  <section id="experiments">
    <div class="section-title wrap">
      <h2>Active Experiments</h2>
      <div class="muted">Client identities are protected. Names are always redacted.</div>
    </div>
    <div class="grid">
      <article class="card sm-4">
        <div class="chips">
          <span class="chip status beta">Pilot</span>
          <span class="chip">Labs → Insights</span>
          <span class="chip">Client: <span class="redact">Lisnup Installations</span></span>
        </div>
        <h3>AI Quote Builder (Installations)</h3>
        <p>Automates quoting for remote starts, tint, and electronics. Parts lookup, pricing rules, and clean PDF outputs. Built for installers; expandable to other trades.</p>
        <div class="actions">
          <a class="btn" href="#" onclick="gate()">Preview</a>
          <a class="btn" href="#" onclick="gate()">Docs</a>
        </div>
      </article>

      <article class="card sm-4">
        <div class="chips"><span class="chip status soon">Coming Soon</span><span class="chip">Labs → Media</span></div>
        <h3>Jmod Media App</h3>
        <p>AI-driven planner + automation: plan → generate → schedule. Feedback improves tone and performance.</p>
        <div class="actions">
          <a class="btn" href="#" onclick="gate()">Roadmap</a>
          <a class="btn" href="#" onclick="gate()">Beta Waitlist</a>
        </div>
      </article>

      <article class="card sm-4">
        <div class="chips"><span class="chip status soon">Coming Soon</span><span class="chip">Labs → Legacy</span></div>
        <h3>Legacy / Haven App</h3>
        <p>Engagement & well-being for seniors: daily prompts, family touchpoints, and positive habit loops. Potential licensing to care centers.</p>
        <div class="actions">
          <a class="btn" href="#" onclick="gate()">Concept Brief</a>
          <a class="btn" href="#" onclick="gate()">Partner Interest</a>
        </div>
      </article>

      <article class="card sm-6">
        <div class="chips">
          <span class="chip">Metrics</span>
          <span id="sampleFlag" class="chip" style="display:none">sample</span>
        </div>
        <h3>Pipeline Stats</h3>
        <p class="muted">Auto-computed from <code>/internal/experiments.json</code>, <code>/internal/tools.json</code>, and <code>/internal/transfers.json</code> if present. Otherwise, sample values are shown.</p>
        <div class="actions">
          <span class="btn" id="expCount">Active Experiments: –</span>
          <span class="btn" id="toolsCount">Tools Built: –</span>
          <span class="btn" id="xferCount">Transfers: –</span>
        </div>
      </article>

      <article class="card sm-6">
        <div class="chips"><span class="chip">How it works</span></div>
        <h3>Internal Licensing Flow</h3>
        <p>“Transfers” = completed hand-offs from Labs to a Jmod division (e.g., Labs → Media). After transfer, the division licenses to customers; Labs continues learning via feedback.</p>
      </article>
    </div>
  </section>

  <!-- TECH -->
  <section id="tech">
    <div class="section-title wrap">
      <h2>Current Tech Stack</h2>
      <div class="muted">We update tools as Labs evolves.</div>
    </div>
    <div class="tech">
      <span class="pill">JavaScript/TypeScript</span>
      <span class="pill">Python</span>
      <span class="pill">Cloudflare Workers</span>
      <span class="pill">GitHub Pages</span>
      <span class="pill pill silver">AI Embeddings & Vectors</span>
      <span class="pill">Postgres/SQLite</span>
      <span class="pill">Excel/VBA bridges</span>
      <span class="pill">REST & Webhooks</span>
    </div>
  </section>

  <!-- JOIN -->
  <section id="join">
    <div class="section-title wrap">
      <h2>Collaborate with Labs</h2>
      <div class="muted">Concept submissions open soon</div>
    </div>
    <div class="grid">
      <article class="card sm-12">
        <p>We’ll soon enable concept submissions and private partner access. For now, sign in to register interest and unlock deeper docs.</p>
        <div class="actions" style="justify-content:center">
          <button class="btn primary" onclick="document.getElementById('signin').showModal()">Sign in / Request access</button>
        </div>
      </article>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="foot-inner">
      <div id="copyright"></div>
      <div>Built for small business clarity.</div>
    </div>
  </footer>

  <!-- Sign-in modal (stub) -->
  <dialog id="signin" aria-labelledby="signin-title">
    <div class="modal">
      <h3 id="signin-title">Sign in to Jmod Labs</h3>
      <p>Public can browse; detailed demos & docs require an account.</p>
    </div>
    <form class="modal-body" method="dialog" onsubmit="return false;">
      <div class="field"><label>Email</label><input type="email" placeholder="you@email.com" required /></div>
      <div class="field"><label>Password</label><input type="password" placeholder="••••••••" required /></div>
      <div class="modal-actions">
        <button class="btn" onclick="document.getElementById('signin').close()">Cancel</button>
        <button class="btn primary" onclick="alert('Stub — wire to auth later')">Sign in</button>
      </div>
    </form>
  </dialog>

  <script>
    // Footer year (Jmod Co.)
    (function(){ const el = document.getElementById('copyright');
      if (el) el.textContent = `© ${new Date().getFullYear()} Jmod Co.`; })();

    function gate(){ document.getElementById('signin').showModal(); }

    /* ===== Build the pulsing network links/nodes for the background ===== */
    (function(){
      const svg   = document.getElementById('labs-svg');
      const gLinks= document.getElementById('links');
      const gNodes= document.getElementById('nodes');
      const W=1200, H=800, COLS=20, ROWS=14, jitter=16;
      const density = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--density')) || 0.75;
      const speed = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--pulse-speed')) || 4200;

      const nodes = [];
      for (let r=0; r<=ROWS; r++){
        for (let c=0; c<=COLS; c++){
          if (Math.random()<0.85){
            const x = (c/COLS)*W + (Math.random()*2-1)*jitter;
            const y = (r/ROWS)*H + (Math.random()*2-1)*jitter;
            nodes.push({x,y});
          }
        }
      }
      nodes.forEach(({x,y})=>{
        const halo = document.createElementNS('http://www.w3.org/2000/svg','circle');
        halo.setAttribute('class','halo'); halo.setAttribute('cx',x); halo.setAttribute('cy',y); halo.setAttribute('r',3.8);
        gNodes.appendChild(halo);
        const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
        dot.setAttribute('class','node'); dot.setAttribute('cx',x); dot.setAttribute('cy',y); dot.setAttribute('r',1.6);
        gNodes.appendChild(dot);
      });
      function link(a,b){
        const p = document.createElementNS('http://www.w3.org/2000/svg','path');
        p.setAttribute('class','link');
        p.setAttribute('d',`M${a.x} ${a.y} L${b.x} ${b.y}`);
        p.style.animationDelay = (Math.random()*speed)+'ms';
        gLinks.appendChild(p);
      }
      for (let i=0;i<nodes.length;i++){
        for (let j=i+1;j<nodes.length;j++){
          const a=nodes[i], b=nodes[j]; const dx=a.x-b.x, dy=a.y-b.y, d=Math.hypot(dx,dy);
          if (d<120 && Math.random() < (density * (120-d)/120)*0.22){ link(a,b); }
        }
      }
      const icons = ['#ai-cloud','#ai-shield','#ai-graph','#ai-gear']; const iconCount=10;
      for (let i=0;i<iconCount;i++){
        const use = document.createElementNS('http://www.w3.org/2000/svg','use');
        use.setAttribute('href', icons[i%icons.length]); use.setAttribute('class','icon');
        const x = 80 + Math.random()*(W-160); const y = 80 + Math.random()*(H-160); const s = 0.9 + Math.random()*0.8;
        use.setAttribute('transform', `translate(${x} ${y}) scale(${s})`); svg.appendChild(use);
      }
      // gentle shimmer for "Jmod Labs" woven text
      const brand = document.getElementById('brand-text'); let t=0;
      (function tick(){ t+=0.02; brand.setAttribute('opacity', 0.75 + Math.sin(t)*0.15); requestAnimationFrame(tick); })();
    })();

    /* ===== Auto metrics: reads 3 JSON lists if present =====
       /internal/experiments.json  -> [{ id, status: active|paused|archived }, ...]
       /internal/tools.json        -> [{ id }, ...]
       /internal/transfers.json    -> [{ experiment, to, date }, ...]
       Definitions:
         Active Experiments = count of items not 'archived'
         Tools Built        = length of tools list
         Transfers          = length of transfers list (formal hand-offs)
    ====================================================================== */
    (async function(){
      const expEl=document.getElementById('expCount'), toolsEl=document.getElementById('toolsCount'),
            xferEl=document.getElementById('xferCount'), sampleFlag=document.getElementById('sampleFlag');

      async function safeJson(path){
        try{ const r=await fetch(path,{cache:'no-store'}); if(!r.ok) throw 0; return await r.json(); }
        catch(e){ return null; }
      }

      const [exps, tools, xfers] = await Promise.all([
        safeJson('/internal/experiments.json'),
        safeJson('/internal/tools.json'),
        safeJson('/internal/transfers.json')
      ]);

      if(exps || tools || xfers){
        const activeCount = Array.isArray(exps) ? exps.filter(e => (e.status||'active').toLowerCase() !== 'archived').length : 0;
        const toolsCount  = Array.isArray(tools) ? tools.length : 0;
        const xferCount   = Array.isArray(xfers) ? xfers.length : 0;
        expEl.textContent=`Active Experiments: ${activeCount}`;
        toolsEl.textContent=`Tools Built: ${toolsCount}`;
        xferEl.textContent=`Transfers: ${xferCount}`;
      } else {
        if(sampleFlag) sampleFlag.style.display='inline-block';
        expEl.textContent='Active Experiments: 3';
        toolsEl.textContent='Tools Built: 12';
        xferEl.textContent='Transfers: 5';
      }
    })();
  </script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jmod Co. ‚Äî Dashboard</title>
<meta name="color-scheme" content="dark light" />
<script src="https://cdn.tailwindcss.com"></script>
<style>
  :root { --card: rgba(17,17,17,.6); --stroke: rgba(255,255,255,.08); }
  .wrap { max-width: 1100px; }
  .card { background: var(--card); border:1px solid var(--stroke); border-radius:20px; padding:16px; }
  .pill { border:1px solid var(--stroke); border-radius:999px; padding:6px 10px; font-size:.8rem; }
  .tile { border:1px solid var(--stroke); border-radius:16px; padding:14px; display:flex; align-items:center; justify-content:space-between; }
  .k { font-weight:700; font-size:1.9rem; letter-spacing:.2px; }
  .sub { opacity:.7; font-size:.85rem; }
  .btn { border:1px solid var(--stroke); padding:6px 10px; border-radius:12px; font-size:.8rem; }
  .hourchip { border:1px solid var(--stroke); border-radius:12px; padding:10px; width:72px; text-align:center; }
  .table { width:100%; border-collapse: collapse; }
  .table th,.table td { border-top:1px solid var(--stroke); padding:8px; font-size:.9rem; }
  .good { color:#16a34a; } .bad { color:#ef4444; }
  html { scroll-behavior:smooth; }
</style>
</head>
<body class="bg-neutral-950 text-neutral-100">
<header class="sticky top-0 z-50 bg-neutral-950/80 backdrop-blur border-b border-neutral-800">
  <nav class="wrap mx-auto flex items-center justify-between px-3 py-2">
    <div class="flex items-center gap-3">
      <span class="font-semibold">Jmod Co. ‚Äî Dashboard</span>
      <span id="nav-msg" class="pill hidden sm:inline">Welcome ‚Äî iterate & ship</span>
    </div>
    <ul class="flex items-center gap-3 text-sm">
      <li><a class="pill" href="/index.html">üè† Resume</a></li>
      <li><a class="pill" href="#events">Local Events</a></li>
      <li><a class="pill" href="#traffic">Traffic</a></li>
      <li><a class="pill" href="#stocks">Stocks</a></li>
      <li><a class="pill" href="#conversions">Conversions</a></li>
      <li><a class="pill" href="#scratchpad">Scratchpad</a></li>
    </ul>
  </nav>
</header>

<main class="wrap mx-auto px-3 py-5 space-y-6">

  <!-- Welcome -->
  <section class="card">
    <div class="flex items-center justify-between">
      <h1 class="text-2xl font-semibold">Welcome</h1>
      <span id="today-pill" class="pill"></span>
    </div>
    <p class="sub mt-2">Welcome to my private dashboard. I‚Äôm tinkering, learning, and having fun‚Äîfeel free to explore anything on display.</p>
  </section>

  <!-- Weather (multi-city) -->
  <section id="weather" class="card space-y-4">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Weather</h2>
      <button id="wx-refresh" class="btn">Refresh</button>
    </div>
    <div id="wx-cards" class="grid gap-4 md:grid-cols-2"></div>

    <div class="card">
      <div class="flex items-center justify-between">
        <div class="text-lg font-semibold">Sunrise ‚Ä¢ Sunset</div>
        <span id="sun-date" class="pill"></span>
      </div>
      <div id="sun-times" class="sub mt-2">Loading‚Ä¶</div>
    </div>
  </section>

  <!-- Verse of the Day -->
  <section id="verse" class="card">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Verse of the Day</h2>
      <button id="v-refresh" class="btn">Refresh</button>
    </div>
    <div id="v-status" class="sub mt-1">Loading‚Ä¶</div>
    <div class="mt-3">
      <div class="pill inline-block mb-2">Verse of the Day</div>
      <blockquote id="v-text" class="text-xl leading-8"></blockquote>
      <div id="v-ref" class="sub mt-2"></div>
    </div>
  </section>

  <!-- Local Events -->
  <section id="events" class="card">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Local Events</h2>
      <span class="pill">next 7‚Äì14 days</span>
    </div>
    <div id="events-list" class="mt-3 space-y-3"></div>
    <div class="sub mt-2">Source: demo feed. I can wire Ticketmaster/SeatGeek with your key to match your old data exactly.</div>
  </section>

  <!-- Traffic -->
  <section id="traffic" class="card space-y-4">
    <h2 class="text-xl font-semibold">Traffic</h2>
    <div>
      <div class="font-medium mb-2">To Work</div>
      <div class="rounded-2xl overflow-hidden border border-neutral-800 aspect-video">
        <iframe id="map-work" class="w-full h-full" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
    <div>
      <div class="font-medium mb-2">To Home</div>
      <div class="rounded-2xl overflow-hidden border border-neutral-800 aspect-video">
        <iframe id="map-home" class="w-full h-full" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </section>

  <!-- Stocks -->
  <section id="stocks" class="card">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-xl font-semibold">Stocks</h2>
      <div class="flex items-center gap-2">
        <button id="s-auto" class="btn">auto refresh</button>
        <button id="s-refresh" class="btn">Refresh</button>
      </div>
    </div>
    <div id="s-list" class="space-y-3"></div>
    <div class="sub mt-2">Source: stooq (keyless). If you want exact prior quotes source, I‚Äôll swap APIs.</div>
  </section>

  <!-- Crypto (not in nav) -->
  <section id="crypto" class="card">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-xl font-semibold">Crypto</h2>
      <button id="c-refresh" class="btn">Refresh</button>
    </div>
    <div id="c-list" class="space-y-3"></div>
    <div class="sub mt-2">Source: CoinGecko Simple Price.</div>
  </section>

  <!-- Pelosi (not in nav) -->
  <section id="pelosi" class="card">
    <h2 class="text-xl font-semibold mb-2">Nancy Pelosi ‚Äî Disclosed Trades (latest 50)</h2>
    <div id="p-status" class="sub mb-2">Loading‚Ä¶</div>
    <div class="overflow-auto">
      <table class="table" id="p-table">
        <thead><tr><th>Disclosed</th><th>Traded</th><th>Ticker / Asset</th><th>Type</th><th>Amount</th><th>PTR</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- Conversions -->
  <section id="conversions" class="card">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Conversions</h2>
    </div>
    <div class="grid md:grid-cols-3 gap-4 mt-3">
      <div class="card">
        <div class="font-medium mb-2">Mass (mg ‚Üî g ‚Üî kg)</div>
        <input id="mg" type="number" step="any" placeholder="mg" class="w-full bg-transparent border border-neutral-800 rounded-xl p-2">
        <div class="flex gap-2 mt-2">
          <button class="btn" data-x="mg2g">To g</button>
          <button class="btn" data-x="mg2kg">To kg</button>
        </div>
        <div id="mass-out" class="sub mt-2"></div>
      </div>
      <div class="card">
        <div class="font-medium mb-2">Length (in ‚Üî cm)</div>
        <input id="inch" type="number" step="any" placeholder="inches" class="w-full bg-transparent border border-neutral-800 rounded-xl p-2">
        <input id="cm" type="number" step="any" placeholder="centimeters" class="w-full bg-transparent border border-neutral-800 rounded-xl p-2 mt-2">
        <div class="flex gap-2 mt-2">
          <button class="btn" data-x="in2cm">To cm</button>
          <button class="btn" data-x="cm2in">cm ‚Üí in</button>
        </div>
        <div id="len-out" class="sub mt-2"></div>
      </div>
      <div class="card">
        <div class="font-medium mb-2">Temperature (¬∞F ‚Üî ¬∞C)</div>
        <input id="f" type="number" step="any" placeholder="¬∞F" class="w-full bg-transparent border border-neutral-800 rounded-xl p-2">
        <input id="c" type="number" step="any" placeholder="¬∞C" class="w-full bg-transparent border border-neutral-800 rounded-xl p-2 mt-2">
        <div class="flex gap-2 mt-2">
          <button class="btn" data-x="f2c">To ¬∞C</button>
          <button class="btn" data-x="c2f">¬∞C ‚Üí ¬∞F</button>
        </div>
        <div id="temp-out" class="sub mt-2"></div>
      </div>
    </div>
  </section>

  <!-- Scratchpad -->
  <section id="scratchpad" class="card">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Scratchpad</h2>
      <button id="pad-clear" class="btn">Clear</button>
    </div>
    <textarea id="pad" class="w-full h-40 bg-neutral-900 border border-neutral-800 rounded-2xl p-3 mt-2" placeholder="Jot quick notes‚Ä¶"></textarea>
  </section>

  <!-- Footer -->
  <footer class="py-8 text-center">
    <a href="#top" class="btn">Top</a>
    <div class="sub mt-3">‚ú¶ Crafted by Jordan Moddes ¬∑ Built with GPT-5 Thinking ‚ú¶</div>
  </footer>
</main>

<script>
/* ====== CONFIG you can edit ====== */
const HOME_ADDR = "411 W Main St, Round Rock, TX";
const WORK_ADDR = "2670 S A.W. Grimes Blvd, Round Rock, TX";
const CITIES = [
  { name:"Round Rock, TX", lat:30.5083, lon:-97.6789 },
  { name:"Pleasant Prairie, WI", lat:42.5531, lon:-87.9334 },
  { name:"Grayslake, IL", lat:42.3445, lon:-88.0417 },
  { name:"Cleveland, OH", lat:41.4993, lon:-81.6944 },
];
const STOCKS = ["BRK.A","BRK.B","AAPL","NVDA","AXP","DAL","HHH","ABNB","SNAP","MOS","RIVN","KO","FWONK","TSLA","AMZN","GNW"];
const COINS = [
  { id:"bitcoin", symbol:"BTC" },
  { id:"ethereum", symbol:"ETH" },
  { id:"solana", symbol:"SOL" },
  { id:"dogecoin", symbol:"DOGE" }
];
/* ================================= */

/* meta */
document.getElementById('today-pill').textContent = new Date().toLocaleDateString();
document.getElementById('nav-msg').classList.remove('hidden');

/* ---------- Weather (Open-Meteo) ---------- */
function codeToText(code){
  const m = {0:'Clear',1:'Mainly clear',2:'Partly cloudy',3:'Overcast',45:'Fog',48:'Rime fog',51:'Light drizzle',53:'Drizzle',55:'Heavy drizzle',61:'Light rain',63:'Rain',65:'Heavy rain',71:'Light snow',73:'Snow',75:'Heavy snow',95:'Thunderstorm'};
  return m[code] || '‚Äî';
}
async function getWeather(lat, lon){
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,apparent_temperature,weather_code,wind_speed_10m&hourly=temperature_2m&temperature_unit=fahrenheit&windspeed_unit=mph&forecast_days=1`;
  const r = await fetch(url, {mode:'cors'}); if(!r.ok) throw new Error(r.status);
  return r.json();
}
async function getSun(lat, lon){
  const u = `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lon}&formatted=0`;
  const r = await fetch(u, {mode:'cors'}); if(!r.ok) throw new Error(r.status);
  return r.json();
}
async function renderWeather(){
  const host = document.getElementById('wx-cards'); host.innerHTML="";
  for (const city of CITIES){
    try{
      const data = await getWeather(city.lat, city.lon);
      const c = data.current||{};
      const hourly = (data.hourly?.temperature_2m||[]).slice(13,18); // next 4-5 hours heuristic by index
      const hours = hourly.map((t,i)=>({temp:Math.round(t), label: (13+i)+":00"}));
      const card = document.createElement('div'); card.className="card";
      card.innerHTML = `
        <div class="flex items-center justify-between">
          <div class="text-lg font-semibold">${city.name}</div>
          <div class="sub">${Math.round(c.wind_speed_10m||0)} mph wind</div>
        </div>
        <div class="k mt-1">${Math.round(c.temperature_2m||0)}¬∞F / ${Math.round(((c.temperature_2m-32)*5/9)||0)}¬∞C</div>
        <div class="sub">Feels ${Math.round(c.apparent_temperature||0)}¬∞F ¬∑ Today ${Math.round(Math.min(...(data.hourly?.temperature_2m||[])))}¬∞F ‚Äî ${Math.round(Math.max(...(data.hourly?.temperature_2m||[])))}¬∞F</div>
        <div class="flex gap-2 mt-3 flex-wrap" id="h-${city.name.replace(/\W+/g,'')}"></div>
      `;
      host.appendChild(card);
      const hwrap = card.querySelector(`[id^="h-"]`);
      hours.forEach(h=>{
        const chip = document.createElement('div'); chip.className="hourchip";
        chip.innerHTML = `<div class="sub">${h.label}</div><div class="font-semibold">${h.temp}¬∞F</div>`;
        hwrap.appendChild(chip);
      });
    }catch(e){
      const err = document.createElement('div'); err.className="sub";
      err.textContent = `Could not load ${city.name} (${e.message})`;
      host.appendChild(err);
    }
  }
  // sunrise/sunset for first city
  try{
    const s = await getSun(CITIES[0].lat, CITIES[0].lon);
    const sr = new Date(s.results.sunrise).toLocaleTimeString(); 
    const ss = new Date(s.results.sunset).toLocaleTimeString();
    document.getElementById('sun-date').textContent = new Date().toLocaleDateString();
    document.getElementById('sun-times').textContent = `Sunrise ${sr} ¬∑ Sunset ${ss}`;
  }catch(e){ document.getElementById('sun-times').textContent = 'Could not load.'; }
}
renderWeather();
document.getElementById('wx-refresh').addEventListener('click', renderWeather);

/* ---------- Verse (public fallback) ---------- */
async function loadVerse(){
  const st = document.getElementById('v-status');
  try{
    st.textContent='Loading‚Ä¶';
    const r = await fetch('https://labs.bible.org/api/?passage=votd&formatting=plain', {mode:'cors'});
    if(!r.ok) throw new Error(r.status);
    const t = await r.text();
    const i = t.lastIndexOf('‚Äî');
    document.getElementById('v-text').textContent = i>0 ? t.slice(0,i).trim() : t.trim();
    document.getElementById('v-ref').textContent  = i>0 ? t.slice(i+1).trim() : 'NET Bible ‚Äî Verse of the Day';
    st.textContent=' ';
  }catch(e){ st.textContent='Could not load.';}
}
loadVerse();
document.getElementById('v-refresh').addEventListener('click', loadVerse);

/* ---------- Events (demo list; replace with API later) ---------- */
const demoEvents = [
  {title:"2010 DTE Energy Music Theatre Royal Deposit", when:"2024-12-31T05:00:00Z", where:"", url:"#"},
  {title:"Megaplex Deposit", when:"2024-12-31T08:00:00Z", where:"Salt Lake Cty UT", url:"#"},
  {title:"2025 Baseball Season Ticket Deposit", when:"2024-12-31T23:30:00Z", where:"Gainesville FL", url:"#"},
  {title:"Sudbury Wolves vs. Sault Ste. Marie Greyhounds", when:"2025-10-29T14:30:00Z", where:"Sudbury ON", url:"#"},
  {title:"Ottawa 67's vs. Brampton Steelheads", when:"2025-10-29T14:30:00Z", where:"Ottawa ON", url:"#"}
];
function renderEvents(){
  const host = document.getElementById('events-list'); host.innerHTML="";
  demoEvents.forEach(ev=>{
    const row = document.createElement('div'); row.className="tile";
    row.innerHTML = `
      <div>
        <div class="font-semibold">${ev.title}</div>
        <div class="sub">${ev.when}</div>
      </div>
      <div class="text-right">
        <div class="sub">${ev.where||""}</div>
        <a href="${ev.url}" class="btn">Details</a>
      </div>`;
    host.appendChild(row);
  });
}
renderEvents();

/* ---------- Traffic (Google embeds) ---------- */
function dirURL(from,to){
  return `https://www.google.com/maps?saddr=${encodeURIComponent(from)}&daddr=${encodeURIComponent(to)}&output=embed`;
}
document.getElementById('map-work').src = dirURL(HOME_ADDR, WORK_ADDR);
document.getElementById('map-home').src = dirURL(WORK_ADDR, HOME_ADDR);

/* ---------- Stocks (stooq) ---------- */
async function fetchStooq(t){
  const sym = `${t.toLowerCase()}.us`;
  const url = `https://stooq.com/q/l/?s=${encodeURIComponent(sym)}&f=sd2t2ohlcvn&h&e=csv`;
  const r = await fetch(url,{mode:'cors'}); if(!r.ok) throw new Error(r.status);
  const text = await r.text(); const lines = text.trim().split('\n');
  if(lines.length<2) return null; const c = lines[1].split(',');
  const open = parseFloat(c[3]); const close = parseFloat(c[6]);
  const pct = (isFinite(open)&&open>0) ? ((close-open)/open*100) : null;
  return {t:t.toUpperCase(), price: close, pct};
}
let stockTimer = null;
async function renderStocks(){
  const host = document.getElementById('s-list'); host.innerHTML="";
  for (const t of STOCKS){
    const row = document.createElement('div'); row.className="tile"; row.innerHTML = `<div class="font-semibold">${t}</div><div class="sub">Loading‚Ä¶</div>`;
    host.appendChild(row);
    try {
      const d = await fetchStooq(t);
      if(!d){ row.innerHTML = `<div class="font-semibold">${t}</div><div class="sub">No data</div>`; continue; }
      const price = isFinite(d.price) ? d.price.toLocaleString(undefined,{style:'currency',currency:'USD'}) : '‚Äî';
      const pct = (d.pct==null) ? '‚Äî' : ((d.pct>=0?'+':'')+d.pct.toFixed(2)+'%');
      const cls = (d.pct==null) ? '' : (d.pct>=0?'good':'bad');
      row.innerHTML = `
        <div>
          <div class="font-semibold">${t} <span class="sub">${t}</span></div>
          <div class="k">${price}</div>
        </div>
        <div class="k ${cls}" style="font-size:1rem">${pct}</div>`;
    } catch(e){
      row.innerHTML = `<div class="font-semibold">${t}</div><div class="sub">Error</div>`;
    }
  }
}
renderStocks();
document.getElementById('s-refresh').addEventListener('click', renderStocks);
document.getElementById('s-auto').addEventListener('click', ()=>{
  if (stockTimer){ clearInterval(stockTimer); stockTimer=null; alert('Auto refresh OFF'); }
  else { stockTimer = setInterval(renderStocks, 60*1000); alert('Auto refresh ON (60s)'); }
});

/* ---------- Crypto (CoinGecko) ---------- */
async function renderCrypto(){
  const host = document.getElementById('c-list'); host.innerHTML="";
  const url = `https://api.coingecko.com/api/v3/simple/price?ids=${COINS.map(c=>c.id).join(',')}&vs_currencies=usd&include_24hr_change=true`;
  try{
    const r = await fetch(url,{mode:'cors'}); if(!r.ok) throw new Error(r.status);
    const j = await r.json();
    for (const c of COINS){
      const d = j[c.id]; if(!d) continue;
      const price = (d.usd??0).toLocaleString(undefined,{style:'currency',currency:'USD'});
      const pct = d.usd_24h_change??0; const cls = pct>=0?'good':'bad';
      const row = document.createElement('div'); row.className="tile";
      row.innerHTML = `<div class="font-semibold">${c.symbol}</div><div class="k">${price}</div><div class="${cls} font-semibold">${(pct>=0?'+':'')+pct.toFixed(2)}%</div>`;
      host.appendChild(row);
    }
  }catch(e){
    host.innerHTML = `<div class="sub">Could not load crypto.</div>`;
  }
}
renderCrypto();
document.getElementById('c-refresh').addEventListener('click', renderCrypto);

/* ---------- Pelosi trades (House Stock Watcher) ---------- */
async function renderPelosi(){
  const st = document.getElementById('p-status');
  const tb = document.querySelector('#p-table tbody'); tb.innerHTML="";
  try{
    st.textContent='Loading‚Ä¶';
    const src = 'https://house-stock-watcher-data.s3-us-west-2.amazonaws.com/data/all_transactions.json';
    const r = await fetch(src,{mode:'cors'}); if(!r.ok) throw new Error(r.status);
    const all = await r.json();
    const rows = all.filter(x=>x.representative?.includes('Nancy Pelosi'))
                    .sort((a,b)=> new Date(b.disclosure_date)-new Date(a.disclosure_date))
                    .slice(0,50);
    rows.forEach(r=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${r.disclosure_date||''}</td><td>${r.transaction_date||''}</td><td>${r.ticker||r.asset_description||''}</td><td>${r.type||''}</td><td>${r.amount||''}</td><td>${r.ptr_link?`<a class="underline" target="_blank" href="${r.ptr_link}">PTR</a>`:''}</td>`;
      tb.appendChild(tr);
    });
    st.textContent = rows.length ? 'Loaded.' : 'No trades found.';
  }catch(e){ st.textContent='Could not load.';}
}
renderPelosi();

/* ---------- Converters ---------- */
document.querySelectorAll('[data-x]').forEach(b=>b.addEventListener('click',()=>{
  const a=b.dataset.x;
  if(a==='mg2g'){ const v=parseFloat(document.getElementById('mg').value||'0'); document.getElementById('mass-out').textContent=`${v} mg = ${(v/1000).toFixed(6)} g`; }
  if(a==='mg2kg'){ const v=parseFloat(document.getElementById('mg').value||'0'); document.getElementById('mass-out').textContent=`${v} mg = ${(v/1e6).toFixed(9)} kg`; }
  if(a==='in2cm'){ const v=parseFloat(document.getElementById('inch').value||'0'); document.getElementById('len-out').textContent=`${v} in = ${(v*2.54).toFixed(4)} cm`; }
  if(a==='cm2in'){ const v=parseFloat(document.getElementById('cm').value||'0'); document.getElementById('len-out').textContent=`${v} cm = ${(v/2.54).toFixed(4)} in`; }
  if(a==='f2c'){ const v=parseFloat(document.getElementById('f').value||'0'); document.getElementById('temp-out').textContent=`${v} ¬∞F = ${((v-32)*5/9).toFixed(2)} ¬∞C`; }
  if(a==='c2f'){ const v=parseFloat(document.getElementById('c').value||'0'); document.getElementById('temp-out').textContent=`${v} ¬∞C = ${(v*9/5+32).toFixed(2)} ¬∞F`; }
}));

/* ---------- Scratchpad ---------- */
const pad = document.getElementById('pad');
pad.value = localStorage.getItem('dash_pad') || "";
pad.addEventListener('input',()=> localStorage.setItem('dash_pad', pad.value));
document.getElementById('pad-clear').addEventListener('click',()=>{ pad.value=""; localStorage.removeItem('dash_pad'); });

</script>
</body>
</html>